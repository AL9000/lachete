{% extends "website/templates/layout.html" %}

{% block title %}La Chête - sondages{% endblock %}

{% block content %}


    {# TODO Permettre de revenir à la page précédente, breadcrum ??? #}

    <h1>{{ question.question_text }} <small>Séléctionne ton choix et vote !</small></h1>
    {% for question in questions %}
        {# Each "contact" is a Contact model object. #}
        {{ question.question_text|upper }}<br />
        ...
    {% endfor %}

    {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

    {% if question.open %}
    <form action="{%  url 'sondages:vote' question.id %}" method="post">
        {% csrf_token %}
        {% for choix in question.choix_set.all %}
            <input type="radio" name="choix" id="choix{{  forloop.counter }}" value="{{ choix.id }}" />
            <label for="choix{{  forloop.counter }}">{{ choix.choix_text }}</label><br />
        {% endfor %}
        {% if question.open %}
            <button type="submit" class="btn btn-default" data-toggle="tooltip" data-placement="right" title="Un seul vote par personne !">Voter</button>
        {% else %}
            <button type="submit" class="btn btn-default disabled" data-toggle="tooltip" data-placement="right" title="Les votes sont terminés !">Voter</button>
        {% endif %}
    </form>
    {% else %}
        <p>Ce sondage est terminé, </p>
    {% endif %}

    <ul class="pager">
        {% if questions.has_previous %}
            <li class="previous disabled"><a href="?page={{ questions.previous_page_number }}">← Précédente</a></li>
        {% endif %}
        {% if questions.has_next %}
            <li class="previous disabled"><a href="?page={{ questions.next_page_number }}">Suivante →</a></li>
        {% endif %}
    </ul>
    <div class="pagination">

    <span class="step-links">
        {% if questions.has_previous %}
            <a href="{% url "sondages:detail" questions.previous_page_number %}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ questions.id }} of {{ questions.paginator.num_pages }}.
        </span>

        {% if questions.has_next %}
            <a href="?page={{ questions.next_page_number }}">next</a>
        {% endif %}
    </span>
</div>
{% endblock %}